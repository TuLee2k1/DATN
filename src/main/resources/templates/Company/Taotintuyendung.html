<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" >
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
          name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta
          name="description"
          content="Responsive Admin &amp; Dashboard Template based on Bootstrap 5" />
  <meta name="author" content="AdminKit" />
  <meta
          name="keywords"
          content="adminkit, bootstrap, bootstrap 5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web" />

  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link rel="shortcut icon" href="img/icons/icon-48x48.png" />

  <link rel="canonical" href="https://demo-basic.adminkit.io/" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <title>Tạo tin tuyển dụng</title>

  <!--  <link th:href="@{../css/app.css}"  rel="stylesheet">-->
  <link rel="stylesheet" href="/css/app.css" />
  <link
          href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap"
          rel="stylesheet" />
  <style>
    body {
      background-color: #f8f9fa;
    }
    .container {
      background-color: #ffffff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .custom-container {
      max-width: 90%; /* Chiều rộng gần bằng 100% nhưng vẫn giữ viền */
      margin: 0 auto; /* Căn giữa */
    }
    .form-label {
      font-weight: bold;
    }
    .form-text {
      color: #6c757d;
    }
    .btn-primary,
    .btn-secondary {
      width: 100px;
    }
    .btn-primary {
      background-color: #6c63ff;
      border-color: #6c63ff;
    }
    .btn-secondary {
      background-color: #f8f9fa;
      border-color: #6c63ff;
      color: #6c63ff;
    }
    .btn-secondary:hover {
      background-color: #e2e6ea;
    }
    .btn-link {
      color: #6c63ff;
    }
    .btn-link:hover {
      color: #5a5a5a;
    }
    .bordered-box {
      border: 1px solid #e2e6ea;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .editor-toolbar {
      border: 1px solid #e2e6ea;
      border-radius: 4px;
      padding: 5px;
      margin-bottom: 10px;
    }
    .editor-toolbar button {
      background: none;
      border: none;
      color: #6c63ff;
      font-size: 16px;
      margin-right: 5px;
    }
    .editor-toolbar button:hover {
      color: #5a5a5a;
    }
    .editor-content {
      border: 1px solid #e2e6ea;
      border-radius: 4px;
      padding: 10px;
      min-height: 100px;
    }

  </style>
</head>

<body>
<div class="wrapper">
  <!-- sidebar -->
  <nav id="sidebar" class="sidebar js-sidebar">
    <div class="sidebar-content js-simplebar">
      <a class="sidebar-brand" href="http://localhost:8080">
        <span class="align-middle">Dream job</span>
      </a>

      <ul class="sidebar-nav">
        <li class="sidebar-header">
          <div class="d-flex align-items-center">
            <span>Quản lý đăng tuyển</span>
          </div>
        </li>
        <li class="sidebar-item">
          <a class="sidebar-link" th:href="@{/job-posts/create}">
            <i class="align-middle" data-feather="plus-square"></i>
            <span>Tạo tin tuyển dụng</span>
          </a>
        </li>
        <li class="sidebar-item">
          <a class="sidebar-link" id="danhsachtindang" th:href="@{/job-posts/Listing}">
            <i class="align-middle" data-feather="file-text"></i>
            <span>Quản lý tin đăng</span>
          </a>
        </li>

        <li class="sidebar-header">
          <div class="d-flex align-items-center">
            <span>Quản lý ứng viên</span>
          </div>
        </li>
        <li class="sidebar-item">
          <a class="sidebar-link" th:href="@{/Company/ApplicationProfile}">
            <i class="align-middle" data-feather="file"></i>
            <span>Hồ sơ ứng tuyển</span>
          </a>
        </li>

        <li class="sidebar-item">
          <a class="sidebar-link" th:href="@{/company/search-profiles}">
            <i class="align-middle" data-feather="search"></i>
            <span>Tìm ứng viên mới</span>
          </a>
        </li>

        <li class="sidebar-item">
          <a class="sidebar-link" th:href="@{/company/saved-profile}" >
            <i class="align-middle" data-feather="shopping-bag"></i>
            <span>Hồ sơ đã lưu</span>
          </a>
        </li>

        <li class="sidebar-item">
          <a class="sidebar-link" th:href="@{/company-account}">
            <i class="align-middle" data-feather="user"></i>
            <span>Tài khoản nhà tuyển dụng</span>
          </a>
        </li>

        <li class="sidebar-item mt-4">
          <a th:href="@{http://localhost:8080/}"  class="btn btn-primary w-100">
            <span>Cổng người tìm việc</span>
            <span class="ms-2">Chuyển</span>
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="main">
    <!-- nav head -->
    <nav class="navbar navbar-expand navbar-light navbar-bg">
      <a class="sidebar-toggle js-sidebar-toggle">
        <i class="hamburger align-self-center"></i>
      </a>

      <div class="navbar-collapse collapse">
        <ul class="navbar-nav navbar-align">
          <li class="nav-item dropdown">
            <a
                    class="nav-icon dropdown-toggle"
                    href="#"
                    id="alertsDropdown"
                    data-bs-toggle="dropdown">
              <div class="position-relative">
                <i class="align-middle" data-feather="bell"></i>
                <span class="indicator">4</span>
              </div>
            </a>
            <div
                    class="dropdown-menu dropdown-menu-lg dropdown-menu-end py-0"
                    aria-labelledby="alertsDropdown">
              <div class="dropdown-menu-header">4 New Notifications</div>
              <div class="list-group">
                <a href="#" class="list-group-item">
                  <div class="row g-0 align-items-center">
                    <div class="col-2">
                      <i
                              class="text-danger"
                              data-feather="alert-circle"></i>
                    </div>
                    <div class="col-10">
                      <div class="text-dark">Update completed</div>
                      <div class="text-muted small mt-1">
                        Restart server 12 to complete the update.
                      </div>
                      <div class="text-muted small mt-1">30m ago</div>
                    </div>
                  </div>
                </a>
                <a href="#" class="list-group-item">
                  <div class="row g-0 align-items-center">
                    <div class="col-2">
                      <i class="text-warning" data-feather="bell"></i>
                    </div>
                    <div class="col-10">
                      <div class="text-dark">Lorem ipsum</div>
                      <div class="text-muted small mt-1">
                        Aliquam ex eros, imperdiet vulputate hendrerit et.
                      </div>
                      <div class="text-muted small mt-1">2h ago</div>
                    </div>
                  </div>
                </a>
                <a href="#" class="list-group-item">
                  <div class="row g-0 align-items-center">
                    <div class="col-2">
                      <i class="text-primary" data-feather="home"></i>
                    </div>
                    <div class="col-10">
                      <div class="text-dark">Login from 192.186.1.8</div>
                      <div class="text-muted small mt-1">5h ago</div>
                    </div>
                  </div>
                </a>
                <a href="#" class="list-group-item">
                  <div class="row g-0 align-items-center">
                    <div class="col-2">
                      <i class="text-success" data-feather="user-plus"></i>
                    </div>
                    <div class="col-10">
                      <div class="text-dark">New connection</div>
                      <div class="text-muted small mt-1">
                        Christina accepted your request.
                      </div>
                      <div class="text-muted small mt-1">14h ago</div>
                    </div>
                  </div>
                </a>
              </div>
              <div class="dropdown-menu-footer">
                <a href="#" class="text-muted">Show all notifications</a>
              </div>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a
                    class="nav-icon dropdown-toggle"
                    href="#"
                    id="messagesDropdown"
                    data-bs-toggle="dropdown">
              <div class="position-relative">
                <i class="align-middle" data-feather="message-square"></i>
              </div>
            </a>
            <div
                    class="dropdown-menu dropdown-menu-lg dropdown-menu-end py-0"
                    aria-labelledby="messagesDropdown">
              <div class="dropdown-menu-header">
                <div class="position-relative">4 New Messages</div>
              </div>
              <div class="list-group">
                <a href="#" class="list-group-item">
                  <div class="row g-0 align-items-center">
                    <div class="col-2">
                      <img
                              src="img/avatars/avatar-5.jpg"
                              class="avatar img-fluid rounded-circle"
                              alt="Vanessa Tucker" />
                    </div>
                    <div class="col-10 ps-2">
                      <div class="text-dark">Vanessa Tucker</div>
                      <div class="text-muted small mt-1">
                        Nam pretium turpis et arcu. Duis arcu tortor.
                      </div>
                      <div class="text-muted small mt-1">15m ago</div>
                    </div>
                  </div>
                </a>
                <a href="#" class="list-group-item">
                  <div class="row g-0 align-items-center">
                    <div class="col-2">
                      <img
                              src="img/avatars/avatar-2.jpg"
                              class="avatar img-fluid rounded-circle"
                              alt="William Harris" />
                    </div>
                    <div class="col-10 ps-2">
                      <div class="text-dark">William Harris</div>
                      <div class="text-muted small mt-1">
                        Curabitur ligula sapien euismod vitae.
                      </div>
                      <div class="text-muted small mt-1">2h ago</div>
                    </div>
                  </div>
                </a>
                <a href="#" class="list-group-item">
                  <div class="row g-0 align-items-center">
                    <div class="col-2">
                      <img
                              src="img/avatars/avatar-4.jpg"
                              class="avatar img-fluid rounded-circle"
                              alt="Christina Mason" />
                    </div>
                    <div class="col-10 ps-2">
                      <div class="text-dark">Christina Mason</div>
                      <div class="text-muted small mt-1">
                        Pellentesque auctor neque nec urna.
                      </div>
                      <div class="text-muted small mt-1">4h ago</div>
                    </div>
                  </div>
                </a>
                <a href="#" class="list-group-item">
                  <div class="row g-0 align-items-center">
                    <div class="col-2">
                      <img
                              src="img/avatars/avatar-3.jpg"
                              class="avatar img-fluid rounded-circle"
                              alt="Sharon Lessman" />
                    </div>
                    <div class="col-10 ps-2">
                      <div class="text-dark">Sharon Lessman</div>
                      <div class="text-muted small mt-1">
                        Aenean tellus metus, bibendum sed, posuere ac,
                        mattis non.
                      </div>
                      <div class="text-muted small mt-1">5h ago</div>
                    </div>
                  </div>
                </a>
              </div>
              <div class="dropdown-menu-footer">
                <a href="#" class="text-muted">Show all messages</a>
              </div>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a
                    class="nav-icon dropdown-toggle d-inline-block d-sm-none"
                    href="#"
                    data-bs-toggle="dropdown">
              <i class="align-middle" data-feather="settings"></i>
            </a>

            <a class="nav-link dropdown-toggle d-none d-sm-inline-block" href="#" data-bs-toggle="dropdown">
              <img th:src="${company?.logo != null && !#strings.isEmpty(company.logo)
											? '/uploads/logocompany/' + company.getLogo()
											: '/Admin/images/person_3.jpg'}"
                   class="rounded-circle"       alt="Logo" width="50" height="50" style="width: 40px; height: 40px; display: inline-flex; align-items: center; justify-content: center; font-size: 30px;" >

              <span class="text-dark fw-bold"
                    th:text="${#authentication.principal.companyDetails != null ? #authentication.principal.companyDetails.name : 'N/A'}">Charles Hall</span>
            </a>
            <div class="dropdown-menu dropdown-menu-end">
              <a class="dropdown-item" th:href="@{/company-account}"><i
                      class="align-middle me-1" data-feather="user"></i> Profile</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" th:href="@{/logout}">Log out</a>
            </div>
          </li>
        </ul>
      </div>
    </nav>

    <form id="jobForm"  th:action="@{${jobPostRequest.id != null ?   '/job-posts/' + jobPostRequest.id + '/update' :   '/job-posts/create'}}"
          method="post"
          th:object="${jobPostRequest}">


      <!-- Thêm hidden input để đảm bảo ID được truyền -->

      <div class="container custom-container mt-1">

        <h4 class="mb-4">Thông tin cơ bản</h4>


        <input type="hidden" th:field="*{id}" />
        <div class="mb-3">
          <label for="jobTitle" class="form-label">Tiêu đề tin tuyển dụng <i class="fa fa-question-circle"></i></label>
          <input type="text" class="form-control" id="jobTitle" th:field="*{jobTitle}" placeholder="Vị trí hiển thị đang tuyển">
          <div id="error-jobTitle" class="text-danger" th:if="${#fields.hasErrors('jobTitle')}" th:errors="*{jobTitle}" style="display: block">
            Vui lòng nhập tiêu đề công việc!

          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="jobCategoryId" class="form-label">Ngành nghề <i class="fa fa-question-circle"></i></label>
            <select class="form-select" id="jobCategoryId" th:field="*{jobCategoryId}">
              <option value="">Chọn ngành nghề</option>
              <option th:each="category : ${jobCategories}"
                      th:value="${category.id}"
                      th:text="${category.categoryName}">
              </option>
            </select>
            <div id="error-Category" class="text-danger" th:if="${#fields.hasErrors('jobCategoryId')}" th:errors="*{jobCategoryId}">
              Vui lòng chọn ngành nghề
            </div>
          </div>

          <div class="col-md-6">
            <label for="exp" class="form-label">Kinh nghiệm <i class="fa fa-question-circle"></i></label>
            <select class="form-select" id="exp" th:field="*{exp}">
              <option value="">Chọn kinh nghiệm</option>
              <option th:each="experience : ${T(poly.com.Enum.Exp).values()}"
                      th:value="${experience}"
                      th:text="${experience.getName()}">
              </option>
            </select>
            <div id="error-Exp" class="text-danger" th:if="${#fields.hasErrors('exp')}" th:errors="*{exp}">
              Vui lòng chọn kinh nghiệm
            </div>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label for="subCategoryIds" class="form-label">Chuyên ngành <i class="fa fa-question-circle"></i></label>
            <select class="form-select" id="subCategoryIds" th:field="*{subCategoryIds}">
              <option value="">Chọn chuyên ngành</option>
              <option th:each="subCategory : ${subCategories}"
                      th:value="${subCategory.id}"
                      th:text="${subCategory.subCategoryName}">
              </option>
            </select>
            <div id="error-SubCategory" class="text-danger" th:if="${#fields.hasErrors('subCategoryIds')}" th:errors="*{subCategoryIds}">
              Vui lòng chọn chuyên ngành
            </div>
          </div>


          <div class="bordered-box mb-3">
            <h5>Địa chỉ</h5>
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="city" class="form-label">
                  Tỉnh / Thành phố
                  <i class="fa fa-question-circle" data-bs-toggle="tooltip" title="Chọn tỉnh/thành phố"></i>
                </label>
                <select class="form-select form-select-lg" id="city" th:field="*{city}"
                        th:data-selected="${jobPostRequest.city}">
                  <option value="">Chọn Tỉnh hoặc Thành phố</option>
                </select>
                <div id="error-City" class="text-danger" th:if="${#fields.hasErrors('city')}" th:errors="*{city}">
                  Vui lòng chọn thành phố
                </div>
              </div>

              <div class="col-md-6">
                <label for="district" class="form-label">
                  Quận / Huyện
                  <i class="fa fa-question-circle" data-bs-toggle="tooltip" title="Chọn quận/huyện"></i>
                </label>
                <select class="form-select form-select-lg" id="district" th:field="*{district}"
                        th:data-selected="${jobPostRequest.district}">
                  <option value="">Chọn Quận hoặc Huyện</option>
                </select>
                <div id="error-District" class="text-danger" th:if="${#fields.hasErrors('district')}" th:errors="*{district}">
                  Quận/Huyện không được để trống
                </div>
              </div>

        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label for="quantity" class="form-label">Số lượng tuyển <i class="fa fa-question-circle"></i></label>
            <input type="number" class="form-control" id="quantity" th:field="*{quantity}" min="1" placeholder="Chỉ nhập số, VD: 10">
            <div id="error-Quantity" class="text-danger" th:if="${#fields.hasErrors('quantity')}" th:errors="*{quantity}">
              Số lượng phải lớn hơn 0

            </div>
          </div>

          <div class="col-md-6">
            <label for="endDate" class="form-label">Hạn nộp hồ sơ <i class="fa fa-question-circle"></i></label>
            <input type="date" class="form-control" id="endDate" th:field="*{endDate}">
            <div id="error-endDate" class="text-danger" th:if="${#fields.hasErrors('endDate')}" th:errors="*{endDate}">
              Ngày kết thúc không được để trống
            </div>
          </div>
        </div>


          <div class="mb-3">
            <label for="address" class="form-label">Số nhà, tên đường <i class="fa fa-question-circle"></i></label>
            <input type="text" class="form-control" id="address" th:field="*{address}" placeholder="VD: 23 Trần Cao Vân, phường Đa Kao">
            <div id="error-address" class="text-danger" th:if="${#fields.hasErrors('address')}" th:errors="*{address}">
              Địa chỉ chi tiết không được để trống
            </div>
          </div>
        </div>

        <h4 class="mb-4">Yêu cầu chung</h4>
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="workType" class="form-label">Hình thức làm việc <i class="fa fa-question-circle"></i></label>
            <select class="form-select" id="workType" th:field="*{workType}">
              <option value="">Chọn hình thức làm việc</option>
              <option th:each="type : ${T(poly.com.Enum.WorkType).values()}"
                      th:value="${type}"
                      th:text="${type.getName()}">
              </option>
            </select>
            <div id="error-workType" class="text-danger" th:if="${#fields.hasErrors('workType')}" th:errors="*{workType}">
              Vui lòng chọn hình thức làm việc
            </div>
          </div>

          <div class="col-md-6">
            <label for="jobLevel" class="form-label">Cấp bậc <i class="fa fa-question-circle"></i></label>
            <select class="form-select" id="jobLevel" th:field="*{jobLevel}">
              <option value="">Chọn cấp bậc</option>
              <option th:each="level : ${T(poly.com.Enum.JobLevel).values()}"
                      th:value="${level}"
                      th:text="${level.getName()}">

              </option>
            </select>
            <div id="error-jobLevel" class="text-danger" th:if="${#fields.hasErrors('jobLevel')}" th:errors="*{jobLevel}">
              Vui lòng chọn cấp bậc công việc
            </div>
          </div>
        </div>



        <div class="row mb-3">
          <div class="col-md-6">
            <label for="minSalary" class="form-label">Lương tối thiểu <i class="fa fa-question-circle"></i></label>
            <input type="number" class="form-control" id="minSalary" th:field="*{minSalary}" placeholder="0">
            <div id="error-minSalary" class="text-danger" th:if="${#fields.hasErrors('minSalary')}" th:errors="*{minSalary}">
              Lương tối thiểu phải lớn hơn hoặc bằng 0
            </div>
          </div>

          <div class="col-md-6">
            <label for="maxSalary" class="form-label">Lương tối đa <i class="fa fa-question-circle"></i></label>
            <input type="number" class="form-control" id="maxSalary" th:field="*{maxSalary}" placeholder="0">
            <div id="error-maxSalary" class="text-danger" th:if="${#fields.hasErrors('maxSalary')}" th:errors="*{maxSalary}">
              Lương tối đa phải lớn hơn hoặc bằng 0
            </div>
          </div>
        </div>

        <h4 class="mb-4">Công việc chi tiết</h4>
        <div class="mb-3">
          <label for="jobDescription" class="form-label">Mô tả công việc</label>
          <textarea class="form-control" id="jobDescription" th:field="*{jobDescription}" rows="5" placeholder="Nhập mô tả công việc..." ></textarea>
          <div id="error-jobDescription" class="text-danger" th:if="${#fields.hasErrors('jobDescription')}" th:errors="*{jobDescription}">
            Mô tả công việc không được để trống
          </div>
        </div>

        <div class="mb-3">
          <label for="jobRequire" class="form-label">Yêu cầu công việc</label>
          <textarea class="form-control" id="jobRequire" th:field="*{jobRequire}" rows="5" placeholder="Nhập yêu cầu công việc..."></textarea>
          <div id="error-jobRequire" class="text-danger" th:if="${#fields.hasErrors('jobRequire')}" th:errors="*{jobRequire}">
            Yêu cầu công việc không được để trống
          </div>
        </div>

        <div class="mb-3">
          <label for="jobBenefit" class="form-label">Quyền lợi</label>
          <textarea class="form-control" id="jobBenefit" th:field="*{jobBenefit}" rows="5" placeholder="Nhập quyền lợi công việc..."></textarea>
          <div id="error-jobBenefit" class="text-danger" th:if="${#fields.hasErrors('jobBenefit')}" th:errors="*{jobBenefit}">
            Quyền lợi không được để trống
          </div>
        </div>

        <div class="d-flex justify-content-between">
          <button type="button" class="btn btn-secondary">Xem trước</button>
          <button type="submit" class="btn btn-secondary">
            <span th:text="${jobPostRequest.id != null ? 'Cập Nhật' : 'Tạo Mới'}"></span>
          </button>
        </div>
      </div>
    </form>




  </div>
</div>
<script>
  // document.getElementById('jobForm').addEventListener('submit', function(event) {
  //   event.preventDefault();
  //   const jobTitleInput = document.getElementById('jobTitle');
  //   const errorTitle = document.getElementById('error-jobTitle');

    // const jobCategoryInput = document.getElementById('jobCategoryId');
    // const errorCategory = document.getElementById('error-Category');
    //
    // const jobExpInput = document.getElementById('exp');
    // const errorExp = document.getElementById('error-Exp');
    //
    // const jobSubCategoryInput = document.getElementById('subCategoryIds');
    // const errorSubCatrgory = document.getElementById('error-SubCategory');
    //
    // const jobQuantityInput = document.getElementById('quantity');
    // const errorQuantity = document.getElementById('error-Quantity');
    //
    // const jobEndDateInput = document.getElementById('endDate');
    // const errorEndate = document.getElementById('error-endDate');
    //
    // const jobCityInput = document.getElementById('city');
    // const errorCity = document.getElementById('error-City');
    //
    // const jobDistrictInput = document.getElementById('district');
    // const errorDistrict = document.getElementById('error-District');
    //
    // const jobAddresInput = document.getElementById('address');
    // const errorAddress = document.getElementById('error-address');
    //
    // const jobWorkTypeInput = document.getElementById('workType');
    // const errorWorkType = document.getElementById('error-workType');
    //
    // const jobJobLevelInput = document.getElementById('jobLevel');
    // const errorJobLevel = document.getElementById('error-jobLevel');
    //
    // const jobMinSalaryInput = document.getElementById('minSalary');
    // const errorMinSalary = document.getElementById('error-minSalary');
    //
    // const jobMaxSalaryInput = document.getElementById('maxSalary');
    // const errorMaxSalary = document.getElementById('error-maxSalary');
    //
    // const jobJobDescriptionInput = document.getElementById('jobDescription');
    // const errorJobDescription = document.getElementById('error-jobDescription');
    //
    // const jobJobRequiredInput = document.getElementById('jobRequire');
    // const errorJobRequired = document.getElementById('error-jobRequire');
    //
    // const jobJobBenefitInput = document.getElementById('jobBenefit');
    // const errorJobBenefit = document.getElementById('error-jobBenefit');
    //
    // let isValid = true;

    // Kiểm tra nếu trường nhập liệu trống
    // if (!jobTitleInput.value.trim()) {
    //   event.preventDefault(); // Ngăn chặn gửi form
    //   errorTitle.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobTitleInput.focus();
    // } else {
    //   errorTitle.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }

    // if (!jobCategoryInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorCategory.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobCategoryInput.focus();
    //   isValid = false;
    // } else {
    //   errorCategory.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobExpInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorExp.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobExpInput.focus();
    //   isValid = false;
    // } else {
    //   errorExp.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobSubCategoryInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorSubCatrgory.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobSubCategoryInput.focus();
    //   isValid = false;
    // } else {
    //   errorSubCatrgory.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobQuantityInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorQuantity.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobQuantityInput.focus();
    //   isValid = false;
    // } else {
    //   errorQuantity.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobEndDateInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorEndate.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobEndDateInput.focus();
    //   isValid = false;
    // } else {
    //   errorEndate.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobCityInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorCity.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobCityInput.focus();
    //   isValid = false;
    // } else {
    //   errorCity.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobDistrictInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorDistrict.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobDistrictInput.focus();
    //   isValid = false;
    // } else {
    //   errorDistrict.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobAddresInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorAddress.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobAddresInput.focus();
    //   isValid = false;
    // } else {
    //   errorAddress.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobWorkTypeInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorWorkType.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobWorkTypeInput.focus();
    //   isValid = false;
    // } else {
    //   errorWorkType.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobJobLevelInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorJobLevel.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobJobLevelInput.focus();
    //   isValid = false;
    // } else {
    //   errorJobLevel.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobMinSalaryInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorMinSalary.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobMinSalaryInput.focus();
    //   isValid = false;
    // } else {
    //   errorMinSalary.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobMinSalaryInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorMaxSalary.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobMaxSalaryInput.focus();
    //   isValid = false;
    // } else {
    //   errorMaxSalary.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobJobDescriptionInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorJobDescription.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobJobDescriptionInput.focus();
    //   isValid = false;
    // } else {
    //   errorJobDescription.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobJobRequiredInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorJobRequired.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobJobRequiredInput.focus();
    //   isValid = false;
    // } else {
    //   errorJobRequired.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }
    //
    // if (!jobJobBenefitInput.value.trim()) {
    //   // event.preventDefault(); // Ngăn chặn gửi form
    //   errorJobBenefit.style.display = 'block'; // Hiển thị thông báo lỗi
    //   jobJobBenefitInput.focus();
    //   isValid = false;
    // } else {
    //   errorJobBenefit.style.display = 'none'; // Ẩn thông báo lỗi nếu có giá trị
    // }

    // Ngăn chặn gửi form nếu có lỗi
    // if (!isValid) {
    //   event.preventDefault();
    // }


  // });

  function fetchArticles() {
    fetch('/job-posts/Listing', {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json'
      }
    })
            .then(response => response.json())
            .then(data => {
              // Xử lý dữ liệu trả về từ API
              console.log(data);
            })
            .catch(error => {
              console.error('Error:', error);
            });
  }

  document.getElementById("danhsachtindang").addEventListener("click", function() {
    window.location.href = '/job-posts/Listing';
  });


  // Hàm format tên tỉnh/thành phố
  function formatProvinceName(name) {
    if (!name) return '';
    // Loại bỏ tiền tố "Thành phố", "Tỉnh"
    return name.replace(/^(Thành phố|Tỉnh)\s+/i, '').trim();
  }

  // Hàm format tên quận/huyện
  function formatDistrictName(name) {
    if (!name) return '';
    // Loại bỏ tiền tố "Quận", "Huyện", "Thị xã"
    return name.replace(/^(Quận|Huyện|Thị xã)\s+/i, '').trim();
  }

  document.addEventListener('DOMContentLoaded', function () {
    const citySelect = document.getElementById('city');
    const districtSelect = document.getElementById('district');
    const selectedCity = citySelect.getAttribute('data-selected');
    const selectedDistrict = districtSelect.getAttribute('data-selected');
    let locationData = [];

    const cityChoices = new Choices(citySelect, {
      searchEnabled: true, // Bật tìm kiếm
      searchPlaceholderValue: 'Tìm kiếm tỉnh/thành phố',
      itemSelectText: 'Nhấn để chọn',
      shouldSort: true,  // Không sắp xếp lại danh sách
      placeholder: true,
      noResultsText: 'Không tìm thấy',
    });

    const districtChoices = new Choices(districtSelect, {
      searchEnabled: true,
      searchPlaceholderValue: 'Tìm kiếm tỉnh/thành phố',
      shouldSort: true,
      itemSelectText: 'Nhấn để chọn',
      placeholder: true,
      noResultsText: 'Không tìm thấy',
    });


    // Fetch dữ liệu từ file JSON
    fetch('/dataApi.json')
            .then(response => response.json())
            .then(data => {
              locationData = data;

              // Điền dữ liệu Tỉnh/Thành phố vào Choices.js
              const cityOptions = locationData.map(province => ({
                value: province.name,
                label: formatProvinceName(province.name),
                selected: province.name === selectedCity,
              }));
              cityChoices.setChoices(cityOptions, 'value', 'label', true);

              // Điền dữ liệu Quận/Huyện nếu có tỉnh đã chọn
              if (selectedCity) {
                updateDistricts(selectedCity, selectedDistrict);
              }

              // Lắng nghe sự kiện chọn Tỉnh/Thành phố
              citySelect.addEventListener('change', function () {
                updateDistricts(this.value);
              });

              function updateDistricts(cityName, selectedDistrict = null) {
                const province = locationData.find(p => p.name === cityName);
                const districtOptions = province && province.districts
                        ? province.districts.map(district => ({
                          value: district.name,
                          label: formatDistrictName(district.name),
                          selected: district.name === selectedDistrict,
                        }))
                        : [];

                // Xóa dữ liệu cũ và cập nhật dữ liệu mới cho district
                districtChoices.clearChoices();
                districtChoices.setChoices(districtOptions, 'value', 'label', true);
              }
            })
            .catch(error => {
              console.error('Lỗi tải dữ liệu:', error);
            });
  });

</script>
<!--<script th:src="@{../js/app.js}"></script>-->
<script src="/js/app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
</body>
</html>
